<div class="container mt-5">
    <h2 class="mb-4 text-center text-md-start">Listado de Tipos de Trabajadores</h2>
  
    <!-- Buscador y botón (responsive) -->
    <div class="row g-2 mb-3">
      <div class="col-12 col-md-6">
        <div class="input-group">
          <input 
            type="text" 
            class="form-control" 
            placeholder="Buscar tipo de trabajador..."
            [(ngModel)]="terminoBusqueda"
            (keyup.enter)="buscarTiposTrabajadores()"
          >
          <button class="btn btn-outline-secondary" type="button" (click)="buscarTiposTrabajadores()">
            <i class="bi bi-search"></i>
          </button>
          @if (terminoBusqueda) {
            <button class="btn btn-outline-danger" type="button" (click)="limpiarBusqueda()">
              <i class="bi bi-x"></i>
            </button>
          }
        </div>
      </div>
      <div class="col-12 col-md-6 d-flex justify-content-end justify-content-md-start">
        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalNuevoTipoTrabajador">
          <i class="bi bi-plus-circle me-2"></i>Nuevo Tipo de Trabajador 
        </button>
      </div>
    </div>
  
    <!-- Tabla responsive -->
    <div class="table-responsive">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Fecha de Creación</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          @if (tiposTrabajadores.length === 0) {
            <tr>
              <td colspan="4" class="text-center text-muted">No hay tipos de trabajadores registrados</td>
            </tr>
          }
          @for(tipoTrabajador of tiposTrabajadores; track tipoTrabajador.id){
            <tr>
              <td>{{ tipoTrabajador.id }}</td>
              <td>{{ tipoTrabajador.nombre }}</td>
              <td>{{ tipoTrabajador.created_at | date:'dd/MM/yyyy' }}</td>
              <td>
                <div class="d-flex flex-wrap gap-1">
                  <button class="btn btn-sm btn-warning" title="Editar" (click)="editarTipoTrabajador(tipoTrabajador)">
                    <i class="bi bi-pencil"></i>
                  </button>
                  <button class="btn btn-sm btn-danger" title="Eliminar" (click)="eliminarTipoTrabajador(tipoTrabajador.id!)">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
  
  <!-- Modal para agregar tipo de trabajador -->
  <app-modalAgregarTipoTrabajador (tipoTrabajadorCreado)="agregarTipoTrabajador($event)"></app-modalAgregarTipoTrabajador>
  
  <!-- Modal para editar tipo de trabajador -->
  <app-modalEditarTipoTrabajador 
    [tipoTrabajadorParaEditar]="tipoTrabajadorSeleccionado" 
    (tipoTrabajadorEditado)="onTipoTrabajadorEditado($event)">
  </app-modalEditarTipoTrabajador>
